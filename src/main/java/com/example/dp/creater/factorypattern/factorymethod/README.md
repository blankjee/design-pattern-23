# 工厂方法模式

## 概念
工厂方法模式是一种常用的类创建型设计模式，此设计模式的核心是封装类中变化的部分，提取其中个性善变的部分为独立类，通过依赖注入以达到解耦、复用和方便后期维护拓展的目的。它的核心结构有四个角色，分别是抽象工厂、具体工厂、抽象产品和具体产品。

可以看做是简单工厂模式的升级版；工厂方法模式就是一个工厂接口和多个工厂实现类，要增加一个新的产品，增加一个新的工厂实现类即可，针对之前的老的工厂实现类也不需要修改。

工厂方法模式相当于在简单工厂模式的基础上，增加了对于不同的产品进行多个不同工厂的实现类的添加，不同的工厂用于Get不同的产品，用于进行不同产品的具体生产。

Client进行调用的时候，直接通过识别不同工厂，然后通过工厂接口类提供的公共方法，即可进行接口方法调用，获取产品；还需要知道具体的产品接口，用于进行具体的产品信息的获取。

## 适用场景
目标可以无限扩展，工厂类也要随之扩展，一对一存在，满足开闭原则，但如果目标实现较多，工厂实现类也会增多，不简洁。

MyBatis中使用的比较多，事务模块和数据源模块都使用了工厂方法模式。

## 在源码中的体现
在Android源码中，ListActivity继承自Activity，将Activity作为工厂方法，生成具有ListView特点的Activity，对ListActivity的说明如下：

参考文章：https://www.cnblogs.com/yemeishu/archive/2013/01/08/2850586.html

## 工厂方法优缺点
满足了OCP(Open-Closed Principle)开闭原则，增加新的类需要修建新的工厂，增加了代码量。

如果同时需要修改多个工厂类的时候会很麻烦，而简单工厂模式只需要修改一个类，工厂方法模式是升级版的简单工厂模式。